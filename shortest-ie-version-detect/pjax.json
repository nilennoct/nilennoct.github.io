{"title":"最短的 IE 版本判断","url":"/shortest-ie-version-detect/","content":"<p>网上看到的一段很酷的代码，留着备用。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// ----------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\">// A short snippet for detecting versions of IE in JavaScript</span></div><div class=\"line\"><span class=\"comment\">// without resorting to user-agent sniffing</span></div><div class=\"line\"><span class=\"comment\">// ----------------------------------------------------------</span></div><div class=\"line\"><span class=\"comment\">// If you're not in IE (or IE version is less than 5) then:</span></div><div class=\"line\"><span class=\"comment\">//     ie === undefined</span></div><div class=\"line\"><span class=\"comment\">// If you're in IE (&gt;=5) then you can determine which version:</span></div><div class=\"line\"><span class=\"comment\">//     ie === 7; // IE7</span></div><div class=\"line\"><span class=\"comment\">// Thus, to detect IE:</span></div><div class=\"line\"><span class=\"comment\">//     if (ie) {}</span></div><div class=\"line\"><span class=\"comment\">// And to detect the version:</span></div><div class=\"line\"><span class=\"comment\">//     ie === 6 // IE6</span></div><div class=\"line\"><span class=\"comment\">//     ie &gt; 7 // IE8, IE9 ...</span></div><div class=\"line\"><span class=\"comment\">//     ie &lt; 9 // Anything less than IE9</span></div><div class=\"line\"><span class=\"comment\">// ----------------------------------------------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// UPDATE: Now using Live NodeList idea from @jdalton</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> ie = (<span class=\"function\"><span class=\"keyword\">function</span><span class=\"params\">()</span></span>{</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> undef,</div><div class=\"line\">        v = <span class=\"number\">3</span>,</div><div class=\"line\">        div = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'div'</span>),</div><div class=\"line\">        all = div.getElementsByTagName(<span class=\"string\">'i'</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">while</span> (</div><div class=\"line\">        div.innerHTML = <span class=\"string\">''</span>,</div><div class=\"line\">        all[<span class=\"number\">0</span>]</div><div class=\"line\">    );</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> v &gt; <span class=\"number\">4</span> ? v : undef;</div><div class=\"line\"></div><div class=\"line\">}());</div></pre></td></tr></table></figure>\n\n","layout":"post"}