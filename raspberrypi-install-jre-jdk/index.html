<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>RaspberryPi安装JRE&amp;JDK | Nil-Enn-Oct</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="description" content="浙江大学嵌入式系统课程

一开始我参考的是Oracle官网上的《Getting Started with Java® SE Embedded on the Raspberry Pi》，从Oracle的网站上下载了ejre-7u10-fcs-b18-linux-arm-vfp-client_headless-28_nov_2012.tar.gz并进行了安装，方法如下。

上传ejre-7u10-f">
<meta property="og:type" content="article">
<meta property="og:title" content="RaspberryPi安装JRE&JDK">
<meta property="og:url" content="http://www.nilennoct.com//raspberrypi-install-jre-jdk/">
<meta property="og:site_name" content="Nil-Enn-Oct">
<meta property="og:description" content="浙江大学嵌入式系统课程

一开始我参考的是Oracle官网上的《Getting Started with Java® SE Embedded on the Raspberry Pi》，从Oracle的网站上下载了ejre-7u10-fcs-b18-linux-arm-vfp-client_headless-28_nov_2012.tar.gz并进行了安装，方法如下。

上传ejre-7u10-f">
<meta property="og:image" content="http://img.nilennoct.com/wp-content/uploads/2013/03/Task_03_03.png">
<meta property="og:image" content="http://img.nilennoct.com/wp-content/uploads/2013/03/Task_03_04.png">
<meta property="og:image" content="http://img.nilennoct.com/wp-content/uploads/2013/03/Task_03_06.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RaspberryPi安装JRE&JDK">
<meta name="twitter:description" content="浙江大学嵌入式系统课程

一开始我参考的是Oracle官网上的《Getting Started with Java® SE Embedded on the Raspberry Pi》，从Oracle的网站上下载了ejre-7u10-fcs-b18-linux-arm-vfp-client_headless-28_nov_2012.tar.gz并进行了安装，方法如下。

上传ejre-7u10-f">


  <link rel="alternative" href="/atom.xml" title="Nil-Enn-Oct" type="application/atom+xml">


  <link rel="icon" href="/favicon.ico">

  <link rel="stylesheet" href="/css/style.css" type="text/css">

  <link rel="stylesheet" href="/lib/fancybox/source/jquery.fancybox.css" type="text/css">

  <!---->
</head>

<body>
<header id="header">
    <div id="header-outer" class="outer">
        <div id="header-control" class="icon-list"></div>
        <div id="header-title" class="inner">
            <h1 id="logo-wrap">
                <a href="javascript:void(0)" id="logo">Nil-Enn-Oct</a>
            </h1>
            
            <h2 id="subtitle-wrap">
                <a id="subtitle">Record my life.</a>
            </h2>
            
        </div>
        <a href="https://github.com/nilennoct" target="_blank"><div id="header-avatar" class="icon-github"></div></a>
        <div id="header-inner" class="inner">
            <nav id="main-nav">
                
                <a class="main-nav-link" href="/">Home</a>
                
                <a class="main-nav-link" href="/neoid3/">NeoID3</a>
                
                <a class="main-nav-link" href="/archives/">Archives</a>
                
            </nav>
        </div>
        <!--<div id="header-search">
            <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://www.nilennoct.com"></form>
        </div>-->
    </div>
</header>


<section id="main">
    <article id="post-raspberrypi-install-jre-jdk" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/raspberrypi-install-jre-jdk/" class="article-date">
  <time datetime="2013-03-03T15:32:16.000Z" itemprop="datePublished">3月 3 2013</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/RaspberryPi/">RaspberryPi</a>
  </div>

  </div>
  <div class="article-inner">
    <!---->
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      RaspberryPi安装JRE&amp;JDK
    </h1>
  

      </header>
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>浙江大学嵌入式系统课程</p>
</blockquote>
<p>一开始我参考的是Oracle官网上的《<a href="http://www.oracle.com/technetwork/articles/java/raspberrypi-1704896.html" target="_blank" rel="external">Getting Started with Java® SE Embedded on the Raspberry Pi</a>》，从Oracle的网站上下载了ejre-7u10-fcs-b18-linux-arm-vfp-client_headless-28_nov_2012.tar.gz并进行了安装，方法如下。</p>
<ul>
<li><p>上传ejre-7u10-fcs-b18-linux-arm-vfp-client_headless-28_nov_2012.tar.gz文件到RPi的/home/pi/文件夹。</p>
</li>
<li><p>安装EJRE。</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> mkdir /opt/java</div><div class="line"><span class="built_in">sudo</span> mv ~/ejre-<span class="number">7</span>u10-fcs-b18-linux-arm-vfp-client_headless-<span class="number">28</span>_nov_2012.tar.gz /opt/java</div><div class="line"><span class="built_in">sudo</span> tar -zxvf ejre-<span class="number">7</span>u10-fcs-b18-linux-arm-vfp-client_headless-<span class="number">28</span>_nov_2012.tar.gz</div></pre></td></tr></table></figure>

<a id="more"></a>

<p>但是却出现了如下图所示的问题。</p>
<p><img src="http://img.nilennoct.com/wp-content/uploads/2013/03/Task_03_03.png" alt="Task_03_03"></p>
<p>即使通过以下命令在/usr/lib/目录下建立libjli.so的链接也依然无法解决。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> ln <span class="operator">-s</span> /opt/java/ejre1.<span class="number">7.0</span>_10/lib/arm/jli/libjli.so /usr/lib/</div></pre></td></tr></table></figure>

<p>经 <a href="http://weibo.com/adoal" target="_blank" rel="external">@adoal</a> 提醒：</p>
<blockquote>
<p>Raspberry Pi可以用armel（软浮点）或者armhf（硬浮点）的Debian，但Oracle官方JRE只有软浮点的。</p>
</blockquote>
<p>在之前提到的Oracle文档中也提到</p>
<blockquote>
<p>NOTE: These instructions are for Debian Squeeze. Other Linux implementations for the Raspberry Pi might work, but they must have been built for the ARM chip’s software floating point. Images linked from the Raspberry Pi website might have been built for hardware floating point; they will not work with Java SE for Embedded.</p>
</blockquote>
<p>而我使用的Raspbian确是armhf的，所以无法使用JRE。</p>
<p>既然无法安装JRE，那我们不妨换一个思路。于是我想到了安装JDK 8 (with JavaFX) for ARM预览版。</p>
<p>查看官网提供的文档 （<a href="http://jdk8.java.net/fxarmpreview/javafx-arm-developer-preview.html" target="_blank" rel="external">点击这里</a>） ，可以看到这个jdk版本已经在hardfloat Raspbian上测试通过了。</p>
<blockquote>
<p><strong>Download the SD card OS image.</strong><br>JavaFX was tested with the hardfloat Raspbian “wheezy” distributions of 2012-09-18 and 2012-10-28. Before deciding which version to download, see RT-26973 in the Known Issues section.</p>
</blockquote>
<p>从 <a href="http://jdk8.java.net/fxarmpreview/" target="_blank" rel="external">http://jdk8.java.net/fxarmpreview/</a> 下载到Oracle JDK 8 (with JavaFX) for ARM Early Access（jdk-8-ea-b36e-linux-arm-hflt-29_nov_2012.tar.gz），用同样的方法上传到RPi，进行安装。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> mv ~/jdk-<span class="number">8</span>-ea-b36e-linux-arm-hflt-<span class="number">29</span>_nov_2012.tar.gz /opt/java</div><div class="line"><span class="built_in">sudo</span> tar -zxvf jdk-<span class="number">8</span>-ea-b36e-linux-arm-hflt-<span class="number">29</span>_nov_2012.tar.gz</div></pre></td></tr></table></figure>

<p>没有悬念，这次Java成功运行了，如下图所示。</p>
<p><img src="http://img.nilennoct.com/wp-content/uploads/2013/03/Task_03_04.png" alt="Task_03_04"></p>
<p>接下来就好办了，添加环境变量。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> vi /etc/profile</div></pre></td></tr></table></figure>

<p>在最后添加以下内容：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> JAVA_HOME=/opt/java/jdk1.<span class="number">8.0</span></div><div class="line"><span class="keyword">export</span> JRE_HOME=<span class="variable">$JAVA_HOME</span>/jre</div><div class="line"><span class="keyword">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib:<span class="variable">$JRE_HOME</span>/lib</div><div class="line"><span class="keyword">export</span> PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$JRE_HOME</span>/bin:<span class="variable">$PATH</span></div></pre></td></tr></table></figure>

<p>最后执行以下命令更新并查看环境变量，如下图，可以看到JAVA的环境变量已经设置好了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">source</span> /etc/profile & env</div></pre></td></tr></table></figure>

<p>赶紧写一个java程序测试一下吧！</p>
<p><img src="http://img.nilennoct.com/wp-content/uploads/2013/03/Task_03_06.png" alt="Task_03_06"></p>

      
    </div>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/raspberrypi-nas-samba-sftp/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          在RaspberryPi上搭建NAS
        
      </div>
    </a>
  
  
    <a href="/raspberrypi-install-connect-note/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">RaspberryPi安装、连接小记</div>
    </a>
  
</nav>

  
</article>


    
<script id="bd-hm">
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?1c4a8ec51af12949dd6b46712e821b53";
        hm.onload = function() {
            delete window["_bdhm_loaded_1c4a8ec51af12949dd6b46712e821b53"];
        };
        var s = document.getElementById('bd-hm');
        s.parentNode.insertBefore(hm, s);
    })();
</script>

    <script>
        window.__v = 1408300344226;
    </script>
</section>

<div id="loadingMask"><span class="icon-cycle"></span></div>




<script data-main="/js/app.min.js" src="/lib/requirejs/require.min.js"></script>

</body>
</html>
