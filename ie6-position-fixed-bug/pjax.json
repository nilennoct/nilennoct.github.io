{"title":"完美解决IE6不支持position:fixed的bug","url":"/ie6-position-fixed-bug/","content":"<p>最近在写前端的时候发现IE6下存在不支持position:fixed的bug。通过查找资料找到了较完美的的解决方法。代码如下：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/* 除IE6浏览器的通用方法 */</span></div><div class=\"line\"><span class=\"class\">.ie6fixedTL</span><span class=\"rules\">{<span class=\"rule\"><span class=\"attribute\">position</span>:<span class=\"value\">fixed</span></span>;<span class=\"rule\"><span class=\"attribute\">left</span>:<span class=\"value\"><span class=\"number\">0</span></span></span>;<span class=\"rule\"><span class=\"attribute\">top</span>:<span class=\"value\"><span class=\"number\">0</span></span></span></span>}</div><div class=\"line\"><span class=\"class\">.ie6fixedBR</span><span class=\"rules\">{<span class=\"rule\"><span class=\"attribute\">position</span>:<span class=\"value\">fixed</span></span>;<span class=\"rule\"><span class=\"attribute\">right</span>:<span class=\"value\"><span class=\"number\">0</span></span></span>;<span class=\"rule\"><span class=\"attribute\">bottom</span>:<span class=\"value\"><span class=\"number\">0</span></span></span></span>}</div><div class=\"line\"><span class=\"comment\">/* IE6浏览器的特有方法 */</span></div><div class=\"line\"><span class=\"comment\">/* 修正IE6振动bug */</span></div><div class=\"line\">* <span class=\"tag\">html</span>,* <span class=\"tag\">html</span> <span class=\"tag\">body</span><span class=\"rules\">{<span class=\"rule\"><span class=\"attribute\">background-image</span>:<span class=\"value\"><span class=\"function\">url</span>(about:blank)</span></span>;<span class=\"rule\"><span class=\"attribute\">background-attachment</span>:<span class=\"value\">fixed</span></span></span>}</div><div class=\"line\">* <span class=\"tag\">html</span> <span class=\"class\">.ie6fixedTL</span><span class=\"rules\">{<span class=\"rule\"><span class=\"attribute\">position</span>:<span class=\"value\">absolute</span></span>;<span class=\"rule\"><span class=\"attribute\">left</span>:<span class=\"value\"><span class=\"function\">expression</span>(<span class=\"function\">eval</span>(document.documentElement.scrollLeft))</span></span>;<span class=\"rule\"><span class=\"attribute\">top</span>:<span class=\"value\"><span class=\"function\">expression</span>(<span class=\"function\">eval</span>(document.documentElement.scrollTop))</span></span></span>}</div><div class=\"line\">* <span class=\"tag\">html</span> <span class=\"class\">.ie6fixedBR</span><span class=\"rules\">{<span class=\"rule\"><span class=\"attribute\">position</span>:<span class=\"value\">absolute</span></span>;<span class=\"rule\"><span class=\"attribute\">left</span>:<span class=\"value\"><span class=\"function\">expression</span>(<span class=\"function\">eval</span>(document.documentElement.scrollLeft+document.documentElement.clientWidth-this.offsetWidth)<span class=\"function\">-</span>(<span class=\"function\">parseInt</span>(this.currentStyle.marginLeft,<span class=\"number\">10</span>)||<span class=\"number\">0</span>)<span class=\"function\">-</span>(<span class=\"function\">parseInt</span>(this.currentStyle.marginRight,<span class=\"number\">10</span>)||<span class=\"number\">0</span>))</span></span>;<span class=\"rule\"><span class=\"attribute\">top</span>:<span class=\"value\"><span class=\"function\">expression</span>(<span class=\"function\">eval</span>(document.documentElement.scrollTop+document.documentElement.clientHeight-this.<span class=\"function\">offsetHeight-</span>(<span class=\"function\">parseInt</span>(this.currentStyle.marginTop,<span class=\"number\">10</span>)||<span class=\"number\">0</span>)<span class=\"function\">-</span>(<span class=\"function\">parseInt</span>(this.currentStyle.marginBottom,<span class=\"number\">10</span>)||<span class=\"number\">0</span>)))</span></span></span>}</div></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n\n<p>说明：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">* <span class=\"tag\">html</span>,* <span class=\"tag\">html</span> <span class=\"tag\">body</span><span class=\"rules\">{<span class=\"rule\"><span class=\"attribute\">background-image</span>:<span class=\"value\"><span class=\"function\">url</span>(about:blank)</span></span>;<span class=\"rule\"><span class=\"attribute\">background-attachment</span>:<span class=\"value\">fixed</span></span></span>}</div></pre></td></tr></table></figure>\n\n<p>用于解决悬浮的元素出现振动的bug。因为IE有一个多步的渲染进程。当你滚动或调整你的浏览器大小的时候，它将重置所有内容并重画页面，这个时候它就会重新处理css表达式。这会引起一个丑陋的“振动”bug，在此处固定位置的元素需要调整以跟上你的(页面的)滚动，于是就会“跳动”。</p>\n<p>解决此问题的技巧就是使用background-attachment:fixed为body或html元素添加一个background-image。这就会强制页面在重画之前先处理CSS。因为是在重画之前处理CSS，它也就会同样在重画之前首先处理你的CSS表达式。从而实现完美的平滑的固定位置元素。</p>\n","layout":"post"}